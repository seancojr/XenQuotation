<?xml version="1.0" encoding="utf-8"?>
<addon addon_id="XenQuotation" title="XenQuotation" version_string="0.1.2" version_id="3" url="http://www.freddyshouse.com/" install_callback_class="XenQuotation_Installation" install_callback_method="install" uninstall_callback_class="XenQuotation_Installation" uninstall_callback_method="uninstall">
  <admin_navigation/>
  <admin_permissions/>
  <admin_style_properties/>
  <admin_templates/>
  <code_events/>
  <code_event_listeners>
    <listener event_id="navigation_tabs" execute_order="10" callback_class="XenQuotation_Event_NavigationTabs" callback_method="listen" active="1" description="Adds the quotes navigation tab."/>
    <listener event_id="template_hook" execute_order="10" callback_class="XenQuotation_Event_TemplateHook" callback_method="listen" active="1" description="Adds a tab to allow searching quotations."/>
    <listener event_id="widget_framework_ready" execute_order="10" callback_class="XenQuotation_Event_WidgetFrameworkReady" callback_method="listen" active="1" description="Adds the random quotation widget to the [bd] Widget Framework (if installed)"/>
  </code_event_listeners>
  <cron/>
  <email_templates/>
  <optiongroups>
    <group group_id="xenquotation" display_order="2000" debug_only="0"/>
    <option option_id="xenquoteAllowedBbCode" edit_format="callback" data_type="array" can_backup="1">
      <default_value>a:10:{s:5:"tag_b";s:1:"1";s:5:"tag_i";s:1:"1";s:5:"tag_u";s:1:"1";s:5:"tag_s";s:1:"1";s:9:"tag_color";s:1:"1";s:8:"tag_font";s:1:"1";s:8:"tag_size";s:1:"1";s:7:"tag_url";s:1:"1";s:9:"tag_email";s:1:"1";s:9:"tag_plain";s:1:"1";}</default_value>
      <edit_format_params>XenQuotation_Option_AllowedBbCode::renderOption</edit_format_params>
      <sub_options>*</sub_options>
      <relation group_id="xenquotation" display_order="500"/>
    </option>
    <option option_id="xenquoteQuotationsPerPage" edit_format="spinbox" data_type="positive_integer" can_backup="1">
      <default_value>25</default_value>
      <edit_format_params></edit_format_params>
      <sub_options></sub_options>
      <relation group_id="xenquotation" display_order="100"/>
    </option>
    <option option_id="xenquoteRandomQuote" edit_format="onoff" data_type="boolean" can_backup="1">
      <default_value>false</default_value>
      <edit_format_params></edit_format_params>
      <sub_options></sub_options>
      <relation group_id="xenquotation" display_order="200"/>
    </option>
  </optiongroups>
  <permissions>
    <permission_groups>
      <permission_group permission_group_id="quote"/>
    </permission_groups>
    <permissions>
      <permission permission_group_id="quote" permission_id="approveUnapprove" permission_type="flag" default_value="unset" interface_group_id="xenQuotationModeratorPermissions" display_order="60"/>
      <permission permission_group_id="quote" permission_id="deleteAny" permission_type="flag" default_value="unset" interface_group_id="xenQuotationModeratorPermissions" display_order="20"/>
      <permission permission_group_id="quote" permission_id="deleteOwn" permission_type="flag" default_value="unset" interface_group_id="xenQuotationPermissions" display_order="50"/>
      <permission permission_group_id="quote" permission_id="editAny" permission_type="flag" default_value="unset" interface_group_id="xenQuotationModeratorPermissions" display_order="70"/>
      <permission permission_group_id="quote" permission_id="editOwn" permission_type="flag" default_value="unset" interface_group_id="xenQuotationPermissions" display_order="40"/>
      <permission permission_group_id="quote" permission_id="hardDeleteAny" permission_type="flag" default_value="unset" interface_group_id="xenQuotationModeratorPermissions" display_order="40"/>
      <permission permission_group_id="quote" permission_id="like" permission_type="flag" default_value="unset" interface_group_id="xenQuotationPermissions" display_order="20"/>
      <permission permission_group_id="quote" permission_id="post" permission_type="flag" default_value="unset" interface_group_id="xenQuotationPermissions" display_order="30"/>
      <permission permission_group_id="quote" permission_id="undelete" permission_type="flag" default_value="unset" interface_group_id="xenQuotationModeratorPermissions" display_order="10"/>
      <permission permission_group_id="quote" permission_id="view" permission_type="flag" default_value="unset" interface_group_id="xenQuotationPermissions" display_order="10"/>
      <permission permission_group_id="quote" permission_id="viewDeleted" permission_type="flag" default_value="unset" interface_group_id="xenQuotationModeratorPermissions" display_order="30"/>
      <permission permission_group_id="quote" permission_id="viewModerated" permission_type="flag" default_value="unset" interface_group_id="xenQuotationModeratorPermissions" display_order="50"/>
    </permissions>
    <interface_groups>
      <interface_group interface_group_id="xenQuotationModeratorPermissions" display_order="1510"/>
      <interface_group interface_group_id="xenQuotationPermissions" display_order="1500"/>
    </interface_groups>
  </permissions>
  <phrases>
    <phrase title="option_group_xenquotation" version_id="11" version_string="1.0.0"><![CDATA[XenQuotation]]></phrase>
    <phrase title="option_group_xenquotation_description" version_id="11" version_string="1.0.0"><![CDATA[Options for the XenQuotation add-on.]]></phrase>
    <phrase title="option_xenquoteAllowedBbCode" version_id="11" version_string="1.0.0"><![CDATA[Allowed BB Code]]></phrase>
    <phrase title="option_xenquoteAllowedBbCode_explain" version_id="11" version_string="1.0.0"><![CDATA[Tick the BB code that you wish to allow in quotations.]]></phrase>
    <phrase title="option_xenquoteQuotationsPerPage" version_id="11" version_string="1.0.0"><![CDATA[Quotations Per Page]]></phrase>
    <phrase title="option_xenquoteQuotationsPerPage_explain" version_id="11" version_string="1.0.0"><![CDATA[The number of quotations that are displayed per page in the quotation list.]]></phrase>
    <phrase title="option_xenquoteRandomQuote" version_id="11" version_string="1.0.0"><![CDATA[Show Random Quote]]></phrase>
    <phrase title="option_xenquoteRandomQuote_explain" version_id="11" version_string="1.0.0"><![CDATA[Show the random quote. This option enables the add-on to add a random quote to the sidebar.]]></phrase>
    <phrase title="permission_group_quote" version_id="10" version_string="1.0.0"><![CDATA[Quotation Permissions]]></phrase>
    <phrase title="permission_interface_xenQuotationModeratorPermissions" version_id="10" version_string="1.0.0"><![CDATA[Quotation Moderator Permissions]]></phrase>
    <phrase title="permission_interface_xenQuotationPermissions" version_id="10" version_string="1.0.0"><![CDATA[Quotation Permissions]]></phrase>
    <phrase title="permission_quote_approveUnapprove" version_id="10" version_string="1.0.0"><![CDATA[Approve / unapprove quotations]]></phrase>
    <phrase title="permission_quote_deleteAny" version_id="10" version_string="1.0.0"><![CDATA[Delete quotations added by anyone]]></phrase>
    <phrase title="permission_quote_deleteOwn" version_id="10" version_string="1.0.0"><![CDATA[Delete quotations added by self]]></phrase>
    <phrase title="permission_quote_editAny" version_id="0" version_string=""><![CDATA[Edit quotations added by anyone]]></phrase>
    <phrase title="permission_quote_editOwn" version_id="10" version_string="1.0.0"><![CDATA[Edit quotations added by self]]></phrase>
    <phrase title="permission_quote_hardDeleteAny" version_id="10" version_string="1.0.0"><![CDATA[Hard-delete quotations added by anyone]]></phrase>
    <phrase title="permission_quote_like" version_id="10" version_string="1.0.0"><![CDATA[Like quotations]]></phrase>
    <phrase title="permission_quote_post" version_id="10" version_string="1.0.0"><![CDATA[Post new quotations]]></phrase>
    <phrase title="permission_quote_undelete" version_id="10" version_string="1.0.0"><![CDATA[Undelete quotations]]></phrase>
    <phrase title="permission_quote_view" version_id="10" version_string="1.0.0"><![CDATA[View quotations]]></phrase>
    <phrase title="permission_quote_viewDeleted" version_id="10" version_string="1.0.0"><![CDATA[View deleted quotations]]></phrase>
    <phrase title="permission_quote_viewModerated" version_id="11" version_string="1.0.0"><![CDATA[View moderated quotations]]></phrase>
    <phrase title="xenquote_added_by" version_id="0" version_string=""><![CDATA[Added By]]></phrase>
    <phrase title="xenquote_added_by_x" version_id="11" version_string="1.0.0"><![CDATA[added by {username}]]></phrase>
    <phrase title="xenquote_add_a_new_quotation" version_id="10" version_string="1.0.0"><![CDATA[Add a New Quotation]]></phrase>
    <phrase title="xenquote_add_a_quotation" global_cache="1" version_id="10" version_string="1.0.0"><![CDATA[Add a Quotation]]></phrase>
    <phrase title="xenquote_add_a_quoteation_now" version_id="11" version_string="1.0.0"><![CDATA[Add a quotation now]]></phrase>
    <phrase title="xenquote_add_quotation" version_id="11" version_string="1.0.0"><![CDATA[Add Quotation]]></phrase>
    <phrase title="xenquote_all_quotations" global_cache="1" version_id="10" version_string="1.0.0"><![CDATA[All Quotations]]></phrase>
    <phrase title="xenquote_and_user_like_this" version_id="11" version_string="1.0.0"><![CDATA[and {user} like this.]]></phrase>
    <phrase title="xenquote_attributed_date" version_id="11" version_string="1.0.0"><![CDATA[Attribution Date]]></phrase>
    <phrase title="xenquote_attributed_date_explain" version_id="11" version_string="1.0.0"><![CDATA[(Optional) Enter the date that the quotation was originally said.]]></phrase>
    <phrase title="xenquote_attributed_post" version_id="1" version_string="0.1.0"><![CDATA[Attributed Post]]></phrase>
    <phrase title="xenquote_attributed_to" version_id="11" version_string="1.0.0"><![CDATA[Attributed To]]></phrase>
    <phrase title="xenquote_attributed_to_explain" version_id="11" version_string="1.0.0"><![CDATA[(Optional) Enter the name (or forum username) of the person that you are quoting.]]></phrase>
    <phrase title="xenquote_context" version_id="11" version_string="1.0.0"><![CDATA[Context]]></phrase>
    <phrase title="xenquote_context_explain" version_id="11" version_string="1.0.0"><![CDATA[(Optional) Add some context to the quotation.]]></phrase>
    <phrase title="xenquote_date_added" version_id="11" version_string="1.0.0"><![CDATA[Date Added]]></phrase>
    <phrase title="xenquote_like_quotation" version_id="11" version_string="1.0.0"><![CDATA[Like Quotation]]></phrase>
    <phrase title="xenquote_list_of_quotations_added_by_x" version_id="11" version_string="1.0.0"><![CDATA[This is a list of quotations saved by {username}.]]></phrase>
    <phrase title="xenquote_list_of_quotations_by_members_of_x" version_id="10" version_string="1.0.0"><![CDATA[This is a list of quotations saved by the members of {board_title}.]]></phrase>
    <phrase title="xenquote_navtab_quotes" global_cache="1" version_id="10" version_string="1.0.0"><![CDATA[Quotations]]></phrase>
    <phrase title="xenquote_no_permission_to_approve_or_unapprove" version_id="11" version_string="1.0.0"><![CDATA[You do not have permission to approve or unapprove this quotation.]]></phrase>
    <phrase title="xenquote_no_permission_to_delete" version_id="11" version_string="1.0.0"><![CDATA[You do not have permission to delete this quotation.]]></phrase>
    <phrase title="xenquote_no_permission_to_view_quotations" version_id="2" version_string="0.1.1"><![CDATA[You do not have permission to view quotations.]]></phrase>
    <phrase title="xenquote_no_permission_to_view_this_quotation" version_id="2" version_string="0.1.1"><![CDATA[You do not have permission to view this quotation.]]></phrase>
    <phrase title="xenquote_option_allowedbbcode_tag" version_id="11" version_string="1.0.0"><![CDATA[[{tag}]]]></phrase>
    <phrase title="xenquote_post_x" version_id="11" version_string="1.0.0"><![CDATA[Post {post}]]></phrase>
    <phrase title="xenquote_post_x_in_y" version_id="11" version_string="1.0.0"><![CDATA[Post {position} in {title}]]></phrase>
    <phrase title="xenquote_quotation" version_id="11" version_string="1.0.0"><![CDATA[Quotation]]></phrase>
    <phrase title="xenquote_quotations" version_id="10" version_string="1.0.0"><![CDATA[Quotations]]></phrase>
    <phrase title="xenquote_quotations_added_by_x" version_id="11" version_string="1.0.0"><![CDATA[Quotations by {username}]]></phrase>
    <phrase title="xenquote_quotation_by" version_id="2" version_string="0.1.1"><![CDATA[Quotation By]]></phrase>
    <phrase title="xenquote_quotation_explain" version_id="11" version_string="1.0.0"><![CDATA[Please note that new lines will be removed from the quotation.]]></phrase>
    <phrase title="xenquote_quotation_status" version_id="2" version_string="0.1.1"><![CDATA[Quotation Status]]></phrase>
    <phrase title="xenquote_random_quotation" version_id="11" version_string="1.0.0"><![CDATA[Random Quotation]]></phrase>
    <phrase title="xenquote_requested_quotation_not_found" version_id="11" version_string="1.0.0"><![CDATA[The requested quotation could not be found.]]></phrase>
    <phrase title="xenquote_save_quotation" version_id="2" version_string="0.1.1"><![CDATA[Save Quotation]]></phrase>
    <phrase title="xenquote_search_quotations" global_cache="1" version_id="10" version_string="1.0.0"><![CDATA[Search Quotations]]></phrase>
    <phrase title="xenquote_there_are_no_quotations_to_display" version_id="11" version_string="1.0.0"><![CDATA[There are no quotations to display.]]></phrase>
    <phrase title="xenquote_this_quote_has_been_deleted" version_id="11" version_string="1.0.0"><![CDATA[This quotation has been deleted.]]></phrase>
    <phrase title="xenquote_this_quote_waiting_approval" version_id="11" version_string="1.0.0"><![CDATA[This quotation is waiting to be approved by a moderator.]]></phrase>
    <phrase title="xenquote_unapprove" version_id="11" version_string="1.0.0"><![CDATA[Unapprove]]></phrase>
    <phrase title="xenquote_undelete" version_id="11" version_string="1.0.0"><![CDATA[Undelete]]></phrase>
    <phrase title="xenquote_unlike_quotation" version_id="11" version_string="1.0.0"><![CDATA[Unlike Quotation]]></phrase>
    <phrase title="xenquote_viewing_a_quotation" version_id="11" version_string="1.0.0"><![CDATA[Viewing a quotation]]></phrase>
    <phrase title="xenquote_viewing_quotation" version_id="11" version_string="1.0.0"><![CDATA[Viewing quotation]]></phrase>
    <phrase title="xenquote_viewing_quotations" version_id="11" version_string="1.0.0"><![CDATA[Viewing quotations]]></phrase>
    <phrase title="xenquote_x_liked_your_quotation_y" version_id="11" version_string="1.0.0"><![CDATA[{name} liked your quotation {title}]]></phrase>
    <phrase title="xenquote_x_liked_ys_quotation_z" version_id="0" version_string=""><![CDATA[{name} liked {author}'s quotation {title}]]></phrase>
    <phrase title="xenquote_your_quotation_has_been_added" version_id="11" version_string="1.0.0"><![CDATA[Your quotation has been added.]]></phrase>
    <phrase title="xenquote_your_quotation_has_been_added_moderated" version_id="11" version_string="1.0.0"><![CDATA[Your quotation has been added, until it is approved by a moderator it will only be visible to you.]]></phrase>
    <phrase title="xenquote_your_quotes" global_cache="1" version_id="10" version_string="1.0.0"><![CDATA[Added By You]]></phrase>
    <phrase title="xenquote_you_may_not_add_a_new_quotation" version_id="10" version_string="1.0.0"><![CDATA[You may not add a new quotation]]></phrase>
    <phrase title="xenquote_you_must_enter_a_quotation" version_id="11" version_string="1.0.0"><![CDATA[You must enter a quotation.]]></phrase>
    <phrase title="xenquote_you_sure_you_want_to_like_this_quote" version_id="11" version_string="1.0.0"><![CDATA[Are you sure you want to like this quotation?]]></phrase>
    <phrase title="xenquote_you_sure_you_want_to_unlike_this_quote" version_id="11" version_string="1.0.0"><![CDATA[Are you sure you want to unlike this quotation?]]></phrase>
  </phrases>
  <route_prefixes>
    <route_type type="public">
      <prefix original_prefix="quotes" class="XenQuotation_Routes_Prefix_Quotes" build_link="data_only"/>
    </route_type>
  </route_prefixes>
  <style_properties/>
  <templates>
    <template title="alert_quote_like" version_id="11" version_string="1.0.0"><![CDATA[{xen:phrase xenquote_x_liked_your_quotation_y,
	'name={xen:helper username, $user, 'subject'}',
	'title=<a href="{xen:link quotes, $content}" class="PopupItemLink">{$content.quotation}</a>'}]]></template>
    <template title="xenquote_list_item_preview" version_id="1" version_string="0.1.0"><![CDATA[<div class="previewTooltip">
	<xen:avatar user="$quote.author" size="s" />

	<div class="text">
		<blockquote class="previewText">
			{xen:raw $quote.parsedQuotation}
		</blockquote>
		<xen:if hascontent="true">
			<div class="attribution dimmed">
				<xen:contentcheck>
					{xen:raw $quote.renderedAttribution}
				</xen:contentcheck>
			</div>
		</xen:if>
		<div class="posterDate muted">{$quote.author.username}, <xen:datetime time="{$quote.quote_date}" class="faint" /></div>
	</div>
</div>]]></template>
    <template title="xenquote_list_item_preview.css" version_id="1" version_string="0.1.0"><![CDATA[.previewTooltip .attribution
{
	font-size: 11px;
	padding-top: 5px;
	border-top: 1px solid {xen:property primaryLighterStill};
	margin-top: 5px;
}]]></template>
    <template title="xenquote_navigation_tab" version_id="10" version_string="1.0.0"><![CDATA[<ul class="secondaryContent blockLinksList">
<xen:hook name="navigation_tabs_quotes">
	<xen:if is="{$canAddQuote}"><li><a href="{xen:link 'quotes/create-quote'}">{xen:phrase xenquote_add_a_quotation}</a></li></xen:if>
	<li><a href="{xen:link 'quotes'}">{xen:phrase xenquote_all_quotations}</a></li>
	<xen:if is="{$visitor.user_id}"><li><a href="{xen:link 'quotes', '', 'user={$visitor.user_id}'}">{xen:phrase xenquote_your_quotes}</a></li></xen:if>
	<xen:if is="{$canSearch}"><li><a href="{xen:link search, '', 'type=quote'}">{xen:phrase xenquote_search_quotations}</a></li></xen:if>
</xen:hook>
</ul>]]></template>
    <template title="xenquote_news_feed_item_quotation_list" version_id="11" version_string="1.0.0"><![CDATA[<h3 class="description">

	<xen:if is="{$content.user_id} == {$visitor.user_id}">
	
		<xen:comment><!-- $user liked your post --></xen:comment>
		{xen:phrase xenquote_x_liked_your_quotation_y,
			'name={xen:helper username, $user, 'primaryText'}',
			'title=<a href="{xen:link quotes, $content}"{xen:if '{$content.hasPreview}', ' class="PreviewTooltip" data-previewUrl="{xen:link quotes/preview, $content}"'}>{$content.quotation}</a>'}
		
	<xen:else />
	
		<xen:comment><!-- $user liked $contentUser's post --></xen:comment>
		{xen:phrase xenquote_x_liked_ys_quotation_z,
			'name={xen:helper username, $user, 'primaryText'}',
			'poster={$content.author_username}',
			'title=<a href="{xen:link quotes, $content}"{xen:if '{$content.hasPreview}', ' class="PreviewTooltip" data-previewUrl="{xen:link quotes/preview, $content}"'}>{$content.quotation}</a>'}
		
	</xen:if>

</h3>

<p class="snippet">{xen:helper snippet, $content.quotation, 100, {xen:array 'stripQuote=1'}}</p>
]]></template>
    <template title="xenquote_post_like" version_id="11" version_string="1.0.0"><![CDATA[<xen:h1>{xen:if $like, '{xen:phrase xenquote_unlike_quotation}', '{xen:phrase xenquote_like_quotation}'}</xen:h1>

<form action="{xen:link 'quotes/like', $quote}" method="post" class="xenForm">

	<dl class="ctrlUnit fullWidth surplusLabel">
		<dt></dt>
		<dd>
			<xen:if is="{$like}">
				{xen:phrase xenquote_you_sure_you_want_to_unlike_this_quote}
			<xen:else />
				{xen:phrase xenquote_you_sure_you_want_to_like_this_quote}
			</xen:if>
		</dd>
	</dl>

	<dl class="ctrlUnit submitUnit">
		<dt></dt>
		<dd><input type="submit" value="{xen:if $like, '{xen:phrase xenquote_unlike_quotation}', '{xen:phrase xenquote_like_quotation}'}" accesskey="s" class="button primary" autofocus="true" /></dd>
	</dl>

	<input type="hidden" name="_xfToken" value="{$visitor.csrf_token_page}" />
</form>]]></template>
    <template title="xenquote_quotation_list.css" version_id="11" version_string="1.0.0"><![CDATA[.quotationList
{
	position: relative;
	zoom: 1;
}

/** column style and width **/

.quotationList .sectionHeaders,
.quotationListItem
{
	display: table;
	table-layout: fixed;
	width: 100%;
	word-wrap: normal;
}

	.quotationList .sectionHeaders dt,
	.quotationList .sectionHeaders dd,
	.quotationListItem .listBlock
	{
		display: table-cell;
		vertical-align: middle;
	}
	
		.quotationList .posterAvatar
		{
			width: {xen:property discussionListAvatarWidth};
		}
		
		.quotationList .main
		{
			width: auto;
		}
		
		.quotationList .stats
		{
			width: {xen:property discussionListStatsWidth};
		}

			.quotationList .stats .likes
			{
				width: {xen:calc '{xen:property discussionListStatsWidth} / 2'};
			}

			.quotationList .stats .views
			{
				text-align: right;
				width: {xen:calc '{xen:property discussionListStatsWidth} / 2'};
			}

			.quotationList .sectionHeaders .stats .minor
			{
				text-align: right;
			}
		
		.quotationList .dateAdded
		{
			width: {xen:property discussionListLastPostWidth};
			text-align: right;
			overflow: hidden;
		}
		
		.quotationList .statsDateAdded /* combined last two columns */
		{
			width: {xen:calc '{xen:property discussionListStatsWidth} + {xen:property discussionListLastPostWidth}'}px;
		}

/* column headers */

.quotationList .sectionHeaders
{	
	{xen:property subHeading}
	
	padding: 0;
}

	.quotationList .sectionHeaders dt span
	{
		display: none !important;
	}
		
	.quotationList .sectionHeaders a
	{
		display: block;
		color: {xen:property subHeading.color};
		outline: none;
	}
	
	.quotationList .sectionHeaders a:hover
	{
		text-decoration: none;
	}
			
	.quotationList .sectionHeaders dd a[href]:hover
	{
		{xen:property subHeadingHover}
	}

	.quotationList .sectionHeaders .stats a
	{
		float: left;
		width: 50%;
		white-space: nowrap;
	}
	
		.quotationList .sectionHeaders a span
		{
			{xen:property subHeading.padding}
			display: block;
		}

/** IE <8 **/
.quotationList .sectionHeaders,
.quotationListItem                { *display: block; _vertical-align: bottom; }
.quotationList .sectionHeaders dt,
.quotationList .sectionHeaders dd,
.quotationListItem .listBlock     { *display: block; *float: left; }
.quotationListItem .listBlock     { _height: 52px; *min-height: 52px; } /* todo: should be calculation */
.quotationList .posterAvatar      { *width: 6.98%; }
.quotationListItem .posterAvatar  { *font-size: 0; }	
.quotationList .main              { *width: 56.98%; }
.quotationList .stats             { *width: 15.97%; }	
.quotationList .dateAdded         { *width: 19.97%; }
.quotationList .statsLastPost     { *width: 35.97%; }
.quotationList .sectionHeaders dt,
.quotationList .sectionHeaders dd { *padding: 5px 0; }
.quotationList .sectionHeaders a,
.quotationList .sectionHeaders a span { *display: inline !important; *float: none !important; }

/* items in quotation list */

.quotationListItems
{
}

/* individual quotation list item */
	
/** main **/

.quotationListItem
{
	{xen:property primaryContent.background}
	
	{xen:property primaryContent.border}
}

	/* sections, section widths */
	
		.quotationListItem .posterAvatar,		
		.quotationListItem .stats
		{
			{xen:property secondaryContent.background}
		}
		
		.quotationListItem .main,
		.quotationListItem .dateAdded
		{
		}
		
	/* avatar section */
	
	.quotationListItem .posterAvatar .avatarContainer
	{
		display: block;
		position: relative;
	}
	
	.quotationListItem .posterAvatar .avatar
	{
		{xen:property discussionListAvatar}
		
		width: auto;
		height: auto;
	}
	
		.quotationListItem .posterAvatar .avatar img
		{
			width: {xen:property discussionListAvatar.width};
			height: {xen:property discussionListAvatar.height};
			display: block;
		}

	/* title, poster section */
	
	.quotationListItem .titleText
	{
		padding: 5px;
		overflow: hidden; zoom: 1;
		position: relative;
	}

		/* first row */
	
		.quotationListItem .title
		{
			{xen:property discussionListFirstRow}
			float: left;
		}

		.quotationListItem .iconKey span
		{
			{xen:property dicussionListIcon}
		}
			
			.quotationListItem .iconKey .moderated { background-image: url('{xen:property imagePath}/xenforo/icons/moderated.png'); }
		
		/* second row */
		
		.quotationListItem .secondRow
		{
			{xen:property discussionListSecondRow}
			clear: both;
		}
		
			.quotationListItem .secondRow .controls
			{
				float: right;
				padding-left: 20px;
			}
				
				.quotationListItem.AjaxProgress .controls
				{
					background: transparent url('{xen:property imagePath}/xenforo/widgets/ajaxload.info_B4B4DC_facebook.gif') no-repeat left center;
				}

	/* stats section */
	
	.quotationListItem .stats dl
	{
		padding: 0 10px;
		border-left: 1px solid {xen:property primaryLighterStill};
		border-right: 1px solid {xen:property primaryLighterStill};
	}
		.quotationListItem .stats .major
		{
			{xen:property discussionListFirstRow};
			
			margin-top: 5px;
		}
			
		.quotationListItem .stats .minor
		{
			{xen:property discussionListSecondRow};
			
			margin-bottom: 5px;
		}
			
	/* last post section */
	
	.quotationListItem .dateAddedInfo
	{
		padding: 5px;
	}
	
		.quotationListItem .dateAddedInfo .username
		{
			{xen:property discussionListFirstRow};
		}

		.quotationListItem .dateAddedInfo .dateTime
		{
			{xen:property discussionListSecondRow}
		}


/* extra note row */

.quotationListItem .noteRow
{
	{xen:property primaryContent.background}
	padding: 5px;
	text-align: center;
	font-size: 11px;
	color: {xen:property primaryMedium};
}

/* deleted item */

.quotationList .quotationListItem.deleted
{
}

	.quotationList .quotationListItem.deleted .avatar img
	{
		opacity: 0.5;
		filter: alpha(opacity='50');
	}
		
	.quotationList .quotationListItem.deleted .deletionNote
	{
		float: left;
		color: rgb(150,0,0);
	}

	.quotationList .quotationListItem.deleted .note
	{
		float: left;
		font-weight: bold;
	}
		
/* moderated item */

.quotationList .quotationListItem.moderated .listBlock
{
	{xen:property primaryContent.background}
}

/** bottom summary **/

.quotationList .sectionFooter
{
	overflow: hidden; zoom: 1;
}

	.quotationList .sectionFooter .contentSummary
	{
		float: left;
		display: block;
	}]]></template>
    <template title="xenquote_quote_create" version_id="1" version_string="0.1.0"><![CDATA[<xen:title>{xen:phrase xenquote_add_a_quotation}</xen:title>

<xen:container var="$head.robots">
	<meta name="robots" content="noindex" />
</xen:container>

<form action="{xen:link 'quotes/save', $quote}" method="post"
	class="xenForm Preview AutoValidator"
	data-previewUrl="{xen:link 'quotes/edit-preview'}"
	data-redirect="on">

	<xen:if is="{$visitor.user_id} == 0">
		<dl class="ctrlUnit">
			<dt><label for="ctrl_guestUsername">{xen:phrase name}:</label></dt>
			<dd><input type="text" name="_guestUsername" value="{$visitor.username}" class="textCtrl" /></dd>
		</dl>
	</xen:if>

	<xen:include template="helper_captcha_unit" />

	<xen:if is="{$post}">
		<input type="hidden" name="post" value="{$post.post_id}" />
		<dl class="ctrlUnit">
			<dt>{xen:phrase xenquote_attributed_post}:</dt>
			<dd>
				<a href="{xen:link 'posts', $post}">{xen:phrase xenquote_post_x_in_y, 'position={xen:calc '{$post.position} + 1'}', 'title={$thread.title}'}</a>
			</dd>
		</dl>
	</xen:if>

	<dl class="ctrlUnit">
		<dt><label for="ctrl_attributedTo">{xen:phrase xenquote_attributed_to}:</label></dt>
		<dd>
			<xen:if is="{$post}">
				{$post.username}
			<xen:else/>
				<input type="text" name="attributedTo" id="ctrl_attributedTo" value="" class="textCtrl AutoComplete" />
				<p class="explain">{xen:phrase xenquote_attributed_to_explain}</p>
			</xen:if>
		</dd>
	</dl>

	<dl class="ctrlUnit">
		<dt><label for="ctrl_attributedDate">{xen:phrase xenquote_attributed_date}:</label></dt>
		<dd>
			<xen:if is="{$post}">
				<xen:datetime time="$post.post_date" />
			<xen:else/>
				<input type="date" name="attributedDate" value="" class="textCtrl" id="ctrl_attributedDate" />
				<p class="explain">{xen:phrase xenquote_attributed_date_explain}</p>
			</xen:if>
		</dd>
	</dl>

	<dl class="ctrlUnit">
		<dt><label for="ctrl_context">{xen:phrase xenquote_context}:</label></dt>
		<dd>
			<input type="text" name="context" id="ctrl_context" value="" class="textCtrl" />
			<p class="explain">{xen:phrase xenquote_context_explain}</p>
		</dd>
	</dl>

	<fieldset>
		<dl class="ctrlUnit fullWidth surplusLabel">
			<dt><label for="ctrl_quotation">{xen:phrase xenquote_quotation}:</label></dt>
			<dd>
				{xen:raw $editorTemplate}
				<p class="explain">{xen:phrase xenquote_quotation_explain}</p>
			</dd>
		</dl>
	</fieldset>

	<dl class="ctrlUnit submitUnit">
		<dt></dt>
		<dd>
			<input type="submit" value="{xen:phrase xenquote_add_quotation}" accesskey="s" class="button primary" />
			<input type="button" value="{xen:phrase preview}..." class="button PreviewButton JsOnly" />
		</dd>
	</dl>

	<input type="hidden" name="_xfToken" value="{$visitor.csrf_token_page}" />
</form>]]></template>
    <template title="xenquote_quote_edit_preview" version_id="11" version_string="1.0.0"><![CDATA[<div class="section">
	<h3 class="subHeading">{xen:phrase preview}</h3>
	<div class="messageText primaryContent baseHtml">{xen:raw $quote.parsedQuotation}</div>
</div>]]></template>
    <template title="xenquote_quote_likeconfirmed" version_id="11" version_string="1.0.0"><![CDATA[L{$quote.liked}]]></template>
    <template title="xenquote_quote_list" version_id="1" version_string="0.1.0"><![CDATA[<xen:if is="{$quotesByUser}">
	<xen:title>{xen:phrase xenquote_quotations_added_by_x, 'username={$quotesByUser}'}{xen:helper pagenumber, $page}</xen:title>
	<xen:h1>{xen:phrase xenquote_quotations}</xen:h1>
	<xen:description>{xen:phrase xenquote_list_of_quotations_added_by_x, 'username={$quotesByUser}'}</xen:description>
<xen:else />
	<xen:title>{xen:phrase xenquote_quotations}{xen:helper pagenumber, $page}</xen:title>
	<xen:h1>{xen:phrase xenquote_quotations}</xen:h1>
	<xen:description>{xen:phrase xenquote_list_of_quotations_by_members_of_x, 'board_title={$xenOptions.boardTitle}'}</xen:description>
</xen:if>

<xen:container var="$head.canonical">
	<link rel="canonical" href="{xen:link 'canonical:quotes', 'page={$page}'}" />
</xen:container>

<xen:if is="{$canCreateQuotation}">
	<xen:topctrl>
		<a href="{xen:link quotes/create-quote}" class="callToAction"><span>{xen:phrase xenquote_add_a_new_quotation}</span></a>
	</xen:topctrl>
</xen:if>

<xen:require css="xenquote_quotation_list.css" />

<xen:if is="{$showPostedNotice}">
	<div class="importantMessage">{xen:phrase xenquote_your_quotation_has_been_added_moderated}</div>
</xen:if>

<div class="pageNavLinkGroup">
	<xen:pagenav link="quotes" linkparams="{$pageNavParams}" page="{$page}" perpage="{$quotationsPerPage}" total="{$totalQuotations}" />
</div>

<div class="quotationList section sectionMain">
	<form action="#" method="post"
		class="InlineModForm"
		data-cookieName="quotes"
		data-controls="#InlineModControls"
		data-imodOptions="#ModerationSelect option">	

		<dl class="sectionHeaders">
			<dt class="posterAvatar"><a><span>{xen:phrase sort_by}:</span></a></dt>			
			<dd class="main"><a class="title"><span>{xen:phrase xenquote_quotation}</span></a></dd>			
			<dd class="stats">
				<a href="{xen:link quotes, '', '_params={$orderParams.likes}'}" class="likes"><span>{xen:phrase likes}{xen:helper sortArrow, $order, $orderDirection, likes}</span></a>
				<a href="{xen:link quotes, '', '_params={$orderParams.views}'}" class="views"><span>{xen:phrase views}{xen:helper sortArrow, $order, $orderDirection, views}</span></a>
			</dd>
			<dd class="dateAdded"><a href="{xen:link quotes, '', '_params={$orderParams.date}'}" ><span>{xen:phrase xenquote_added_by}{xen:helper sortArrow, $order, $orderDirection, date}</span></a></dd>
		</dl>

		<ol class="quotationListItems">
		<xen:if is="{$quotes}">
			<xen:foreach loop="$quotes" value="$quote">
				<xen:include template="xenquote_quote_list_item" />
			</xen:foreach>
		<xen:else />
			<li class="primaryContent">{xen:phrase xenquote_there_are_no_quotations_to_display} <xen:if is="{$canCreateQuotation}"><a href="{xen:link quotes/create-quote}">{xen:phrase xenquote_add_a_quoteation_now}</a></xen:if></li>
		</xen:if>
		</ol>

	</form>
</div>

<div class="pageNavLinkGroup">
	<xen:pagenav link="quotes" linkparams="{$pageNavParams}" page="{$page}" perpage="{$quotationsPerPage}" total="{$totalQuotations}" />
</div>

<xen:require css="xenquote_list_item_preview.css" />
<xen:include template="preview_tooltip" />]]></template>
    <template title="xenquote_quote_list_item" version_id="1" version_string="0.1.0"><![CDATA[<li id="quote-{$quote.quote_id}" class="quotationListItem {$quote.quote_state}" data-author="{$quote.author.username}">

	<div class="listBlock posterAvatar"><xen:avatar user="$quote.author" size="s" img="true" /></div>			
		
	<div class="listBlock main">
		<div class="titleText">
			<h3 class="title">
				<a href="{xen:link 'quotes', $quote}"
					class="{xen:if $quote.hasPreview, PreviewTooltip}"
					data-previewUrl="{xen:if $quote.hasPreview, {xen:link quotes/preview, $quote}}">{xen:helper wrap, {xen:helper striphtml, $quote.parsedQuotation}, 50}</a>
			</h3>

			<xen:if hascontent="true">
				<div class="iconKey">
				<xen:contentcheck>
					<xen:if is="{$quote.isModerated}"><span class="moderated" title="{xen:phrase moderated}">{xen:phrase moderated}</span></xen:if>
				</xen:contentcheck>
				</div>
			</xen:if>

			<div class="secondRow">
				<div class="controls dimmed">
					<xen:if is="{$quote.canApprove}"><a href="{xen:link 'quotes/approve', $quote}">{xen:phrase approve}</a></xen:if>
					<xen:if is="{$quote.canUnapprove}"><a href="{xen:link 'quotes/unapprove', $quote}">{xen:phrase xenquote_unapprove}</a></xen:if>
					<xen:if is="{$quote.canDelete}"><a href="{xen:link 'quotes/delete', $quote}">{xen:phrase delete}</a></xen:if>
					<xen:if is="{$quote.canUndelete}"><a href="{xen:link 'quotes/undelete', $quote}">{xen:phrase xenquote_undelete}</a></xen:if>
					<xen:if is="{$quote.canLike}"><a href="{xen:link 'quotes/like', $quote}" class="LikeLink {xen:if $quote.like_date, unlike, like}" data-container="#likes-quote-{$quote.quote_id}"><span></span><span class="LikeLabel">{xen:if $quote.like_date, {xen:phrase unlike}, {xen:phrase like}}</span></a></xen:if>
				</div>
				<xen:if is="{$quote.isDeleted}">
					<div class="deletionNote">
						{xen:phrase xenquote_this_quote_has_been_deleted}
					</div>
				<xen:else />
					<div class="attribution muted">
						{xen:raw $quote.renderedAttribution}
					</div>
				</xen:if>
			</div>
		</div>
	</div>
		
	<div class="listBlock stats pairsJustified">
		<dl class="major"><dt>{xen:phrase likes}:</dt> <dd id="likes-quote-{$quote.quote_id}"><span class="LikeText">{xen:number {$quote.likes}}</span></dd></dl>
		<dl class="minor"><dt>{xen:phrase views}:</dt> <dd>{xen:number {$quote.views}}</dd></dl>
	</div>

	<div class="listBlock dateAdded">
		<dl class="dateAddedInfo">
			<dt><xen:username user="$quote.author" /></dt>
			<dd class="muted dateTime"><xen:if is="{$quote.quote_date} > 0"><xen:datetime time="$quote.quote_date" /></xen:if></dd>
		</dl>
	</div>
	
</li>]]></template>
    <template title="xenquote_quote_view" version_id="2" version_string="0.1.1"><![CDATA[<xen:title>{xen:phrase xenquote_quotation}</xen:title>
<xen:h1></xen:h1>

<xen:require css="xenquote_quote_view.css" />

<xen:if hascontent="true">
	<dl class="quotationAlerts">
		<dt>{xen:phrase xenquote_quotation_status}:</dt>
		<xen:contentcheck>
			<xen:if is="{$quote.isModerated}">
				<dd>{xen:phrase moderated}</dd>
			</xen:if>
			<xen:if is="{$quote.isDeleted}">
				<dd>{xen:phrase deleted}</dd>
			</xen:if>
		</xen:contentcheck>
	</dl>
</xen:if>

<div class="section">
	<div class="sectionMain">
		<div class="primaryContent quotation">
			{xen:raw $quote.parsedQuotation}
		</div>
		<xen:if hascontent="true">
			<div class="secondaryContent">
				<xen:contentcheck>
					{xen:raw $quote.renderedAttribution}
				</xen:contentcheck>
			</div>
		</xen:if>
	</div>
</div>

<div class="sectionFooter quotationAttributes">
	<div class="attributeBlock">
		<dl>
			<dt>{xen:phrase xenquote_added_by}:</dt>
			<dd><xen:username user="$quote.author" /></dd>
		</dl>
		<dl>
			<dt>{xen:phrase xenquote_date_added}:</dt>
			<dd><xen:datetime time="$quote.quote_date" /></dd>
		</dl>
	</div>
	<div class="attributeBlock">
		<dl>
			<dt>{xen:phrase likes}:</dt>
			<dd>{xen:number {$quote.likes}}</dd>
		</dl>
		<dl>
			<dt>{xen:phrase views}:</dt>
			<dd>{xen:number {$quote.views}}</dd>
		</dl>
	</div>
	<div class="likeUsers">
		<xen:if is="{$likeList}">
			<strong>{xen:raw {$likeList}}</strong>
		</xen:if>
	</div>
</div>]]></template>
    <template title="xenquote_quote_view.css" version_id="2" version_string="0.1.1"><![CDATA[.quotationAlerts
{
	border: 1px solid {xen:property primaryLighterStill};
	border-radius: 5px;
	font-size: 11px;
	margin: 10px 0;
	padding: 5px 10px;
}
	
	.quotationAlerts dt
	{
		color: {xen:property primaryLight};
		display: inline;
	}
	
	.quotationAlerts dd
	{
		color: {xen:property primaryDark};
		font-weight: bold;
		display: inline;
	}

.quotation
{
	font-size: 16pt;
}

.likeUsers
{
	clear: both;
	padding: 4px 0 0 0;
}

.attributeBlock
{
	width: 50%;
	float: left;
}

.quotationAttributes dl
{
	display: table;
	table-layout: fixed;
	padding: 2px 4px 2px 0;
	width: 100%;
}

.quotationAttributes dl dt,
.quotationAttributes dl dd
{
	display: table-cell;
	width: 50%;
}

.quotationAttributes dl dt
{
	font-weight: bold;
}]]></template>
    <template title="xenquote_search_form_quote" version_id="1" version_string="0.1.0"><![CDATA[<xen:title>{xen:phrase xenquote_search_quotations}</xen:title>

<xen:navigation>
	<xen:breadcrumb href="{xen:link full:search}">{xen:phrase search}</xen:breadcrumb>
</xen:navigation>

<form action="{xen:link 'search/search'}" method="post" class="xenForm AutoValidator"
	data-optInOut="optIn"
	data-redirect="true">

	<xen:include template="search_form_tabs" />
	
	<dl class="ctrlUnit">
		<dt><label for="ctrl_keywords">{xen:phrase keywords}:</label></dt>
		<dd>
			<ul>
				<li><input type="search" name="keywords" value="{$search.keywords}" results="0" class="textCtrl" id="ctrl_keywords" autofocus="true" /></li>
			</ul>
		</dd>
	</dl>

	<dl class="ctrlUnit">
		<dt><label for="ctrl_users">{xen:phrase posted_by_member}:</label></dt>
		<dd>
			<ul>
				<li>
					<input type="text" name="users" value="{$search.users}" class="textCtrl AutoComplete" id="ctrl_users" />
					<p class="explain">{xen:phrase separate_names_with_comma}</p>
				</li>
			</ul>
		</dd>
	</dl>

	<dl class="ctrlUnit">
		<dt><label for="ctrl_date">{xen:phrase newer_than}:</label></dt>
		<dd>
			<input type="date" name="date" value="{$search.date}" class="textCtrl" id="ctrl_date" />
		</dd>
	</dl>

	<dl class="ctrlUnit submitUnit">
		<dt></dt>
		<dd><input type="submit" value="{xen:phrase search}" accesskey="s" class="button primary" /></dd>
	</dl>

	<input type="hidden" name="type" value="quote" />
	<input type="hidden" name="_xfToken" value="{$visitor.csrf_token_page}" />
</form>]]></template>
    <template title="xenquote_search_form_tabs" version_id="11" version_string="1.0.0"><![CDATA[		<li{xen:if "{$searchType} == 'quote'", ' class="active"'}><a href="{xen:link search, '', 'type=quote'}">{xen:phrase xenquote_search_quotations}</a></li>]]></template>
    <template title="xenquote_search_result_quote" version_id="2" version_string="0.1.1"><![CDATA[<li id="quote-{$quote.quote_id}" class="searchResult post primaryContent" data-author="{$quote.author.username}">

	<div class="listBlock posterAvatar"><xen:avatar user="$quote.author" size="s" img="true" /></div>

	<div class="listBlock main">
		<div class="titleText">
			<h3 class="title">{$i}
				<a href="{xen:link 'quotes', $quote}">{xen:helper wrap, {xen:helper striphtml, $quote.parsedQuotation}, 50}</a>
			</h3>
		</div>

		<div class="meta">
			{xen:phrase xenquote_quotation_by}: <xen:username user="$quote.author" />,
			<xen:datetime time="{$quote.quote_date}" />
		</div>
	</div>
</li>]]></template>
    <template title="xenquote_sidebar_random_quote" version_id="3" version_string="0.1.2"><![CDATA[<xen:require css="xenquote_sidebar_random_quote.css" />

	<!-- block: sidebar_random_quote -->
	<div class="section randomQuotation">
		<div class="secondaryContent">
			<h3><a href="{xen:link 'canonical:quotes/', $quote}" rel="canonical">{xen:phrase xenquote_random_quotation}</a></h3>
			<xen:include template="xenquote_sidebar_random_quote_content" />
		</div>
	</div>
	<!-- end block: sidebar_random_quote -->]]></template>
    <template title="xenquote_sidebar_random_quote.css" version_id="3" version_string="0.1.2"><![CDATA[.sidebar .section .quotation
{
	font-size: 11pt;
}

.sidebar .section .quotationAttribution
{
	padding: 6px 0 0 0;
}]]></template>
    <template title="xenquote_sidebar_random_quote_content" version_id="3" version_string="0.1.2"><![CDATA[<xen:require css="xenquote_sidebar_random_quote.css" />

<xen:if is="{$quote}">
	<div class="quotation">
		{xen:raw $quote.parsedQuotation}
	</div>
	<div class="muted quotationAttribution">
		<a href="{xen:link 'canonical:quotes/', $quote}" rel="canonical" class="dimmed">#{$quote.quote_id}</a> {xen:raw $quote.renderedAttribution}
	</div>
<xen:else />
	{xen:phrase xenquote_there_are_no_quotations_to_display}
</xen:if>]]></template>
  </templates>
</addon>
